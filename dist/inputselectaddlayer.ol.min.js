!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){e.exports='<div id="inputselectaddlayer" class="m-control m-container m-inputselectaddlayer">\r\n  {{#if logo}}\r\n  <div id="m-inputselectaddlayer-content" class="m-inputselectaddlayer-content logo">\r\n    {{else}}\r\n    <div id="m-inputselectaddlayer-content" class="m-inputselectaddlayer-content">\r\n      {{/if}}\r\n      {{#if title}}\r\n      <div id="m-inputselectaddlayer-content-title" class="m-inputselectaddlayer-content-title">\r\n        {{title}}\r\n      </div>\r\n      {{/if}}\r\n      <div id="m-inputselectaddlayer-content-body" class="m-inputselectaddlayer-content-body">\r\n        <select id=\'groupSelector\' class="m-inputselectaddlayer-select select-group" name="select">\r\n          <option value=""> --- Selecciona un Grupo --- </option>\r\n          {{#each groups}}\r\n          <option value="{{this}}">{{this}}</option>\r\n          {{/each}}\r\n        </select>\r\n        <select id=\'layerSelector\' class="m-inputselectaddlayer-select select-layer" name="select">\r\n          <option value=""> --- Selecciona una capa --- </option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n    {{#if logo}}\r\n    <div id="logo-container">\r\n      <img id="img-logo" src="{{logo}}" alt="{{logo_alt}}" title="{{logo_alt}}">\r\n    </div>\r\n    {{/if}}\r\n  </div>'},function(e,t){e.exports='<div id="inputselectaddlayer" class="m-control m-container m-inputselectaddlayer">\r\n  {{#if logo}}\r\n  <div id="m-inputselectaddlayer-content" class="m-inputselectaddlayer-content logo">\r\n    {{else}}\r\n    <div id="m-inputselectaddlayer-content" class="m-inputselectaddlayer-content">\r\n      {{/if}}\r\n    {{#if title}}\r\n    <div id="m-inputselectaddlayer-content-title" class="m-inputselectaddlayer-content-title">\r\n      {{title}}\r\n    </div>\r\n    {{/if}}\r\n    <div id="m-inputselectaddlayer-content-body" class="m-inputselectaddlayer-content-body">\r\n      <select id=\'layerSelector\' class="m-inputselectaddlayer-select simple-select" name="select">\r\n        <option value=""> --- Selecciona una capa --- </option>\r\n        {{#each groups}}\r\n        <optgroup label="{{group}}">\r\n          {{#each layers}}\r\n          <option value="{{this.name}}*{{this.options.styles}}">{{this.legend}}</option>\r\n          {{/each}}\r\n          {{/each}}\r\n        </optgroup>\r\n      </select>\r\n    </div>\r\n  </div>\r\n  {{#if logo}}\r\n  <div id="logo-container">\r\n    <img id="img-logo" src="{{logo}}" alt="{{logo_alt}}" title="{{logo_alt}}">\r\n  </div>\r\n  {{/if}}\r\n</div>'},function(e,t){e.exports='<div id="inputselectaddlayer" class="m-control m-container m-inputselectaddlayer">\r\n  {{#if logo}}\r\n  <div id="m-inputselectaddlayer-content" class="m-inputselectaddlayer-content logo">\r\n    {{else}}\r\n    <div id="m-inputselectaddlayer-content" class="m-inputselectaddlayer-content">\r\n      {{/if}}\r\n      {{#if title}}\r\n      <div id="m-inputselectaddlayer-content-title" class="m-inputselectaddlayer-content-title">\r\n        {{title}}\r\n      </div>\r\n      {{/if}}\r\n      <div id="m-inputselectaddlayer-content-body" class="m-inputselectaddlayer-content-body">\r\n        <select id="layerSelector" class="m-inputselectaddlayer-select simple-select" name="select">\r\n          <option value=""> --- Selecciona una capa --- </option>\r\n          {{#each layers}}\r\n\r\n          <option value="{{this.name}}*{{this.options.styles}}">{{this.legend}}</option>\r\n          {{/each}}\r\n          </optgroup>\r\n        </select>\r\n      </div>\r\n    </div>\r\n    {{#if logo}}\r\n    <div id="logo-container">\r\n      <img id="img-logo" src="{{logo}}" alt="{{logo_alt}}" title="{{logo_alt}}">\r\n    </div>\r\n    {{/if}}\r\n  </div>'},function(e){e.exports=JSON.parse('{"url":{"name":"Inputselectaddlayer","separator":"*"},"constructor":"M.plugin.Inputselectaddlayer","parameters":[],"files":{"ol":{"scripts":[],"styles":[]}},"metadata":{"uuid_plugin":"","uuid_version_plugin":"","version_ficha_metadatos":"","name":"Inputselectaddlayer","description":"Description of the plugin","text":"A full text about plugin","version":"1.0.0","date":"","author":"","org":"","tags":"mapea,plugin","icon":"./facade/assets/icons/icons.svg","buttons":[{"title":"","description":"","querySelector":""},{"title":"","description":"","querySelector":""}],"dependencies":{"modules":["",""],"plugins":[{"uuid":"","name":""}],"services":[{"name":"","description":""}]},"compatibility":["6.0.0"]}}')},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(4);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(p,M.impl.Control);var t,n,r,s=c(p);function p(){return o(this,p),s.apply(this,arguments)}return t=p,(n=[{key:"addTo",value:function(e,t){l(u(p.prototype),"addTo",this).call(this,e,t)}}])&&i(t.prototype,n),r&&i(t,r),p}(),d=n(1),f=n.n(d),y=n(0),h=n.n(y),m=n(2),v=n.n(m);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(i,M.Control);var t,n,r,o=_(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),M.utils.isUndefined(p)&&M.exception("La implementación usada no puede crear controles InputselectaddlayerControl");var n=new p;return(t=o.call(this,n,"Inputselectaddlayer")).layer=null,t.config=e,t.checkConfig(t.config),t.title=e.title,t}return t=i,(n=[{key:"createView",value:function(e){var t=this;return new Promise((function(e,n){var r=M.template.compileSync(t.template,t.templateVars);t.element=r,t.addEvents(r),e(r)}))}},{key:"addEvents",value:function(e){var t=this;this.layerSelector=e.querySelector("select#layerSelector"),Array.isArray(this.data)&&(this.groupSelector=e.querySelector("select#groupSelector"),this.layerSelector.disabled=!0,this.groupSelector.addEventListener("change",(function(){var e=t.groupSelector[t.groupSelector.selectedIndex].value;t.layerList=t.getGroupLayersByName(e),""==t.groupSelector[0].value&&t.groupSelector.remove(0),t.config.group?(t.layerGroups=t.getLayersFromGroup(e),t.fillLayerSelectorOptionGroups(t.layerGroups)):t.fillLayerSelector(t.layerList),t.layerSelector.disabled=!1}))),this.layerSelector.addEventListener("change",(function(){var e=t.layerSelector[t.layerSelector.selectedIndex].value;t.LoadLayer(e),""==t.layerSelector[0].value&&t.layerSelector.remove(0)}))}},{key:"getActivationButton",value:function(e){return e.querySelector(".m-inputselectaddlayer button")}},{key:"equals",value:function(e){return e instanceof i}},{key:"checkConfig",value:function(e){if(e.hasOwnProperty("title")&&(this.title=e.title),e.hasOwnProperty("logo")&&(this.logo=e.logo),e.hasOwnProperty("logo_alt")&&(this.logo_alt=e.logo_alt),this.layerList=new Array,this.groupList=new Array,this.data=e.data,this.isGroup=e.group,Array.isArray(this.data)&1==e.group){for(var t=0;t<e.data.length;t++)this.groupList.push(e.data[t].name);this.templateVars={vars:{title:this.title,groups:this.groupList,logo:this.logo,logo_alt:this.logo_alt}},this.template=h.a}else if(Array.isArray(this.data)&0==e.group){for(var n=0;n<e.data.length;n++)this.groupList.push(e.data[n].name);this.templateVars={vars:{title:this.title,groups:this.groupList,logo:this.logo,logo_alt:this.logo_alt}},this.template=h.a}else e.group?(this.getLayersFromGroupsLayers(this.data.layerGroups),this.templateVars={vars:{title:this.title,groups:this.data.layerGroups,logo:this.logo,logo_alt:this.logo_alt}},this.template=f.a):(this.layerList=this.data.layers,this.templateVars={vars:{title:this.title,layers:this.data.layers,logo:this.logo,logo_alt:this.logo_alt}},this.template=v.a)}},{key:"getGroupLayersByName",value:function(e){var t=!1,n=new Array;do{for(var r=0;r<this.data.length;r++)this.data[r].name==e&&(n=this.data[r].layers,t=!0)}while(!t);return n}},{key:"getLayersFromGroup",value:function(e){var t=!1,n=new Array;do{for(var r=0;r<this.data.length;r++)this.data[r].name==e&&(n=this.data[r].layerGroups,t=!0)}while(!t);return n}},{key:"getLayersFromGroupsLayers",value:function(e){for(var t=null,n=null,r=0;r<e.length;r++){t=e[r].layers;for(var o=0;o<t.length;o++)n=t[o],this.layerList.push(n)}}},{key:"fillLayerSelector",value:function(e){this.layerList=e,this.layerSelector.innerHTML="";var t=document.createElement("option");t.value="",t.textContent=" --- Selecciona una capa --- ",this.layerSelector.appendChild(t);for(var n=0;n<e.length;n++){var r=e[n];(t=document.createElement("option")).value=r.name+"*"+r.options.styles,t.textContent=r.legend,this.layerSelector.appendChild(t)}}},{key:"fillLayerSelectorOptionGroups",value:function(e){this.layerList=new Array;var t=!1;this.layerSelector.innerHTML="";var n=document.createElement("option");n.value="",n.textContent=" --- Selecciona una capa --- ",this.layerSelector.appendChild(n);for(var r=0;r<e.length;r++){var o=e[r].group,i=document.createElement("optgroup");i.label=o;do{for(var l=0;l<e.length;l++)if(e[l].group==o){for(var a=e[r].layers,c=0;c<a.length;c++){var s=a[c];this.layerList.push(s);var u=document.createElement("option");u.value=s.name+"*"+s.options.styles,u.textContent=s.legend,i.appendChild(u)}t=!0}}while(!t);this.layerSelector.appendChild(i)}}},{key:"LoadLayer",value:function(e){var t=this,n=e.split("*")[0],r=e.split("*")[1],o=!1;this.map_.removeLayers(this.layer);do{for(var i=0;i<this.layerList.length;i++)(this.layerList[i].name==n&&""==r||this.layerList[i].name==n&&"undefined"==r||this.layerList[i].name==n&&this.layerList[i].options.styles==r)&&(this.layer=this.layerList[i],o=!0)}while(!o);this.map_.addLayers([this.layer]),this.layer.setOpacity(.9),this.layer.displayInLayerSwitcher=!0,this.map_.getControls({name:"layerswitcher"}).length>0&&this.map_.getControls({name:"layerswitcher"})[0].render(),this.layer.on(M.evt.LOAD,(function(){t.fire(M.evt.LOAD)}))}}])&&b(t.prototype,n),r&&b(t,r),i}(),P=n(3);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var o=R(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(i,M.Plugin);var t,n,r,o=E(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).map_=null,t.config=e,t.controls_=[],t.metadata_=P.metadata,t}return t=i,(n=[{key:"addTo",value:function(e){var t=this;this.control_=new L(this.config),this.controls_.push(this.control_),this.map_=e,this.panel_=new M.ui.Panel("panelInputselectaddlayer",{className:"m-selector-panel",position:M.ui.position.TR,collapsedButtonClass:"g-cartografia-capas2",tooltip:"Añadir capa"}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_),this.control_.on(M.evt.ADDED_TO_MAP,(function(){t.fire(M.evt.ADDED_TO_MAP)})),this.control_.on(M.evt.LOAD,(function(){t.fire(M.evt.LOAD)}))}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"getLayer",value:function(){return this.control_.layer}}])&&x(t.prototype,n),r&&x(t,r),i}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.Inputselectaddlayer=k,window.M.control.InputselectaddlayerControl=L,window.M.impl.control.InputselectaddlayerControl=p}]);